/**
 * Marrow - v0.3.6-179 (build date: 15/05/2013)
 * Sandbox webapp loading framework with conditional recipes
 * Copyright (c) 2013 Anton Ignatov <abietis@gmail.com>
 */
var glob="undefined"==typeof window?global:window,Handlebars=glob.Handlebars||require("handlebars");this.App=this.App||{},this.App.Templates=this.App.Templates||{},this.App.Templates.app=Handlebars.template(function(t,e,n,i,o){function s(t,e){var i,o,s,a="";return a+='\n	<section id="main">\n		<input id="toggle-all" type="checkbox">\n		<label for="toggle-all">Mark all as complete</label>\n		',s={hash:{"item-view":"todo-item",tag:"ul",id:"todo-list"},inverse:h.noop,fn:h.program(2,r,e),data:e},i=n.collection,o=i?i.call(t,s):m.call(t,"collection",s),(o||0===o)&&(a+=o),a+="\n	</section>\n	",s={hash:{tag:"footer",id:"footer"},data:e},a+=f((i=n.view,i?i.call(t,"stats",s):m.call(t,"view","stats",s)))+"\n	"}function r(t,e){var i,o="";return o+='\n		<div class="view">\n			<input class="toggle" type="checkbox" ',i=n["if"].call(t,t.completed,{hash:{},inverse:h.noop,fn:h.program(3,a,e),data:e}),(i||0===i)&&(o+=i),o+=">\n			<label>",(i=n.title)?i=i.call(t,{hash:{},data:e}):(i=t.title,i=typeof i===p?i.apply(t):i),o+=f(i)+'</label>\n			<button class="destroy"></button>\n		</div>\n		<input class="edit" value="',(i=n.title)?i=i.call(t,{hash:{},data:e}):(i=t.title,i=typeof i===p?i.apply(t):i),o+=f(i)+'">\n		'}function a(){return'checked="checked"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,o=o||{};var l,c,u,d="",h=this,p="function",f=this.escapeExpression,m=n.helperMissing;return d+='<section id="todoapp">\n	<header id="header">\n		<h1>todos</h1>\n		<input id="new-todo" placeholder="What needs to be done?" autofocus>\n	</header>\n	',u={hash:{},inverse:h.program(1,s,o),fn:h.noop,data:o},l=n.empty,c=l?l.call(e,e.collection,u):m.call(e,"empty",e.collection,u),(c||0===c)&&(d+=c),d+='\n</section>\n<div id="info">\n	<p>Double-click to edit a todo</p>\n	<p>Written by <a href="https://github.com/addyosmani">Addy Osmani</a> &amp; <a href="https://github.com/eastridge">Ryan Eastridge</a></p>\n	<p>Part of <a href="http://todomvc.com">TodoMVC</a></p>\n</div>'}),this.App.Templates.stats=Handlebars.template(function(t,e,n,i,o){function s(){return"All"}function r(){return"Active"}function a(){return"Completed"}function l(t,e){var i,o="";return o+='\n<button id="clear-completed">Clear completed (',(i=n.completed)?i=i.call(t,{hash:{},data:e}):(i=t.completed,i=typeof i===p?i.apply(t):i),o+=f(i)+")</button>\n"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,o=o||{};var c,u,d,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<span id="todo-count"><strong>',(c=n.remaining)?c=c.call(e,{hash:{},data:o}):(c=e.remaining,c=typeof c===p?c.apply(e):c),h+=f(c)+"</strong> ",(c=n.itemText)?c=c.call(e,{hash:{},data:o}):(c=e.itemText,c=typeof c===p?c.apply(e):c),h+=f(c)+' left</span>\n<ul id="filters">\n	<li>\n		',d={hash:{"class":"selected"},inverse:m.noop,fn:m.program(1,s,o),data:o},c=n.link,u=c?c.call(e,"/",d):g.call(e,"link","/",d),(u||0===u)&&(h+=u),h+="\n	</li>\n	<li>\n		",d={hash:{},inverse:m.noop,fn:m.program(3,r,o),data:o},c=n.link,u=c?c.call(e,"/active",d):g.call(e,"link","/active",d),(u||0===u)&&(h+=u),h+="\n	</li>\n	<li>\n		",d={hash:{},inverse:m.noop,fn:m.program(5,a,o),data:o},c=n.link,u=c?c.call(e,"/completed",d):g.call(e,"link","/completed",d),(u||0===u)&&(h+=u),h+="\n	</li>\n</ul>\n",u=n["if"].call(e,e.completed,{hash:{},inverse:m.noop,fn:m.program(7,l,o),data:o}),(u||0===u)&&(h+=u),h}),"object"==typeof exports&&exports&&(module.exports=this.App.Templates),function(){"use strict";window.app.Todo=Thorax.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})},isVisible:function(){var t=this.get("completed");return""===window.app.TodoFilter?!0:"completed"===window.app.TodoFilter?t:"active"===window.app.TodoFilter?!t:void 0}})}(),function(){"use strict";var t=Thorax.Collection.extend({model:window.app.Todo,localStorage:new Store("todos-backbone-thorax"),completed:function(){return this.filter(function(t){return t.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(t){return t.get("order")}});window.app.Todos=new t,window.app.Todos.fetch()}(),function(){"use strict";Thorax.View.extend({tagName:"li",name:"todo-item",events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close",rendered:function(){this.$el.toggleClass("completed",this.model.get("completed"))}},toggleCompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.$(".edit").focus()},close:function(){var t=this.$(".edit").val().trim();t?this.model.save({title:t}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(t){t.which===ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}})}(),function(){"use strict";Thorax.View.extend({name:"stats",events:{"click #clear-completed":"clearCompleted",rendered:"highlightFilter"},initialize:function(){this.listenTo(window.app.Todos,"all",_.debounce(function(){this.render()}))},clearCompleted:function(){return _.each(window.app.Todos.completed(),function(t){t.destroy()}),!1},context:function(){var t=window.app.Todos.remaining().length;return{itemText:1===t?"item":"items",completed:window.app.Todos.completed().length,remaining:t}},highlightFilter:function(){this.$("#filters li a").removeClass("selected").filter('[href="#/'+(window.app.TodoFilter||"")+'"]').addClass("selected")}})}(),function(){"use strict";Thorax.View.extend({name:"app",events:{"keypress #new-todo":"createOnEnter","click #toggle-all":"toggleAllComplete",collection:{"change:completed":"toggleToggleAllButton",filter:"toggleToggleAllButton"},rendered:"toggleToggleAllButton"},toggleToggleAllButton:function(){var t=this.$("#toggle-all")[0];t&&(t.checked=!this.collection.remaining().length)},itemFilter:function(t){return t.isVisible()},newAttributes:function(){return{title:this.$("#new-todo").val().trim(),order:this.collection.nextOrder(),completed:!1}},createOnEnter:function(t){t.which===ENTER_KEY&&this.$("#new-todo").val().trim()&&(this.collection.create(this.newAttributes()),this.$("#new-todo").val(""))},toggleAllComplete:function(){var t=this.$("#toggle-all")[0].checked;this.collection.each(function(e){e.save({completed:t})})}})}(),function(){"use strict";var t=Backbone.Router.extend({routes:{"":"setFilter",":filter":"setFilter"},setFilter:function(t){window.app.TodoFilter=t?t.trim().replace(/^\//,""):"",window.app.Todos.trigger("filter")}});window.app.TodoRouter=new t}();