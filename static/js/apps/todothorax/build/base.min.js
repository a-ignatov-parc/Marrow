var glob="undefined"==typeof window?global:window,Handlebars=glob.Handlebars||require("handlebars");this.App=this.App||{},this.App.Templates=this.App.Templates||{},this.App.Templates.app=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h="";return h+='\n	<section id="main">\n		<input id="toggle-all" type="checkbox">\n		<label for="toggle-all">Mark all as complete</label>\n		',f={hash:{"item-view":"todo-item",tag:"ul",id:"todo-list"},inverse:m.noop,fn:m.program(2,g,b),data:b},d=c.collection||a.collection,e=d?d.call(a,f):p.call(a,"collection",f),(e||0===e)&&(h+=e),h+="\n	</section>\n	",f={hash:{tag:"footer",id:"footer"},data:b},h+=o((d=c.view||a.view,d?d.call(a,"stats",f):p.call(a,"view","stats",f)))+"\n	"}function g(a,b){var d,e="";return e+='\n		<div class="view">\n			<input class="toggle" type="checkbox" ',d=c["if"].call(a,a.completed,{hash:{},inverse:m.noop,fn:m.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+=">\n			<label>",(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===n?d.apply(a):d),e+=o(d)+'</label>\n			<button class="destroy"></button>\n		</div>\n		<input class="edit" value="',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===n?d.apply(a):d),e+=o(d)+'">\n		'}function h(){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k,l="",m=this,n="function",o=this.escapeExpression,p=c.helperMissing;return l+='<section id="todoapp">\n	<header id="header">\n		<h1>todos</h1>\n		<input id="new-todo" placeholder="What needs to be done?" autofocus>\n	</header>\n	',k={hash:{},inverse:m.program(1,f,e),fn:m.noop,data:e},i=c.empty||b.empty,j=i?i.call(b,b.collection,k):p.call(b,"empty",b.collection,k),(j||0===j)&&(l+=j),l+='\n</section>\n<div id="info">\n	<p>Double-click to edit a todo</p>\n	<p>Written by <a href="https://github.com/addyosmani">Addy Osmani</a> &amp; <a href="https://github.com/eastridge">Ryan Eastridge</a></p>\n	<p>Part of <a href="http://todomvc.com">TodoMVC</a></p>\n</div>'}),this.App.Templates.stats=Handlebars.template(function(a,b,c,d,e){function f(){return"All"}function g(){return"Active"}function h(){return"Completed"}function i(a,b){var d,e="";return e+='\n<button id="clear-completed">Clear completed (',(d=c.completed)?d=d.call(a,{hash:{},data:b}):(d=a.completed,d=typeof d===n?d.apply(a):d),e+=o(d)+")</button>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.helperMissing;return m+='<span id="todo-count"><strong>',(j=c.remaining)?j=j.call(b,{hash:{},data:e}):(j=b.remaining,j=typeof j===n?j.apply(b):j),m+=o(j)+"</strong> ",(j=c.itemText)?j=j.call(b,{hash:{},data:e}):(j=b.itemText,j=typeof j===n?j.apply(b):j),m+=o(j)+' left</span>\n<ul id="filters">\n	<li>\n		',l={hash:{"class":"selected"},inverse:p.noop,fn:p.program(1,f,e),data:e},j=c.link||b.link,k=j?j.call(b,"/",l):q.call(b,"link","/",l),(k||0===k)&&(m+=k),m+="\n	</li>\n	<li>\n		",l={hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e},j=c.link||b.link,k=j?j.call(b,"/active",l):q.call(b,"link","/active",l),(k||0===k)&&(m+=k),m+="\n	</li>\n	<li>\n		",l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},j=c.link||b.link,k=j?j.call(b,"/completed",l):q.call(b,"link","/completed",l),(k||0===k)&&(m+=k),m+="\n	</li>\n</ul>\n",k=c["if"].call(b,b.completed,{hash:{},inverse:p.noop,fn:p.program(7,i,e),data:e}),(k||0===k)&&(m+=k),m}),"object"==typeof exports&&exports&&(module.exports=this.App.Templates),function(){"use strict";window.app.Todo=Thorax.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})},isVisible:function(){var a=this.get("completed");return""===window.app.TodoFilter?!0:"completed"===window.app.TodoFilter?a:"active"===window.app.TodoFilter?!a:void 0}})}(),function(){"use strict";var a=Thorax.Collection.extend({model:window.app.Todo,localStorage:new Store("todos-backbone-thorax"),completed:function(){return this.filter(function(a){return a.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(a){return a.get("order")}});window.app.Todos=new a,window.app.Todos.fetch()}(),function(){"use strict";Thorax.View.extend({tagName:"li",name:"todo-item",events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close",rendered:function(){this.$el.toggleClass("completed",this.model.get("completed"))}},toggleCompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.$(".edit").focus()},close:function(){var a=this.$(".edit").val().trim();a?this.model.save({title:a}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(a){a.which===ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}})}(),function(){"use strict";Thorax.View.extend({name:"stats",events:{"click #clear-completed":"clearCompleted",rendered:"highlightFilter"},initialize:function(){this.listenTo(window.app.Todos,"all",_.debounce(function(){this.render()}))},clearCompleted:function(){return _.each(window.app.Todos.completed(),function(a){a.destroy()}),!1},context:function(){var a=window.app.Todos.remaining().length;return{itemText:1===a?"item":"items",completed:window.app.Todos.completed().length,remaining:a}},highlightFilter:function(){this.$("#filters li a").removeClass("selected").filter('[href="#/'+(window.app.TodoFilter||"")+'"]').addClass("selected")}})}(),function(){"use strict";Thorax.View.extend({name:"app",events:{"keypress #new-todo":"createOnEnter","click #toggle-all":"toggleAllComplete",collection:{"change:completed":"toggleToggleAllButton",filter:"toggleToggleAllButton"},rendered:"toggleToggleAllButton"},toggleToggleAllButton:function(){var a=this.$("#toggle-all")[0];a&&(a.checked=!this.collection.remaining().length)},itemFilter:function(a){return a.isVisible()},newAttributes:function(){return{title:this.$("#new-todo").val().trim(),order:this.collection.nextOrder(),completed:!1}},createOnEnter:function(a){a.which===ENTER_KEY&&this.$("#new-todo").val().trim()&&(this.collection.create(this.newAttributes()),this.$("#new-todo").val(""))},toggleAllComplete:function(){var a=this.$("#toggle-all")[0].checked;this.collection.each(function(b){b.save({completed:a})})}})}(),function(){"use strict";var a=Backbone.Router.extend({routes:{"":"setFilter",":filter":"setFilter"},setFilter:function(a){window.app.TodoFilter=a?a.trim().replace(/^\//,""):"",window.app.Todos.trigger("filter")}});window.app.TodoRouter=new a}();