/**
 * Marrow - v0.3.3-4 (build date: 28/05/2013)
 * https://github.com/a-ignatov-parc/Marrow
 * Sandbox webapp loading framework with conditional recipes
 * Copyright (c) 2013 Anton Ignatov <abietis@gmail.com>
 */
(function(t){function e(e){e=e.substr(1);var i=e.match(/\(([^\)]+)\)/g)||[];if(!(e in t.mockJSON.data))return console.log(e),console.log(i),e;var s=t.mockJSON.data[e];switch(n(s)){case"array":var r=Math.floor(s.length*o());return s[r];case"function":return s()}}function n(e){return t.isArray(e)?"array":null===e?"null":typeof e}function i(t){return 10>t?"0"+t:t+""}function o(){return t.mockJSON.random?Math.random():(l=l.concat(l.splice(0,1)),l[0])}function s(){return new Date(Math.floor(o()*(new Date).valueOf()))}var r=[];t.mockJSON=function(e,n){for(var i=0;r.length>i;i++){var o=r[i];if(""+o.request==""+e){r.splice(i,1);break}}return r.push({request:e,template:n}),t},t.mockJSON.random=!0;var a=t.ajax;t.ajax=function(e){if("json"===e.dataType)for(var n=0;r.length>n;n++){var i=r[n];if(i.request.test(e.url))return e.success(t.mockJSON.generateFromTemplate(i.template)),t}return a.apply(this,arguments)},t.mockJSON.generateFromTemplate=function(i,s){var r=0,a=(s||"").match(/\w+\|(\d+)-(\d+)/);if(a){var l=parseInt(a[1],10),c=parseInt(a[2],10);r=Math.round(o()*(c-l))+l}var u=null;switch(n(i)){case"array":u=[];for(var p=0;r>p;p++)u[p]=t.mockJSON.generateFromTemplate(i[0]);break;case"object":u={};for(var h in i){u[h.replace(/\|(\d+-\d+|\+\d+)/,"")]=t.mockJSON.generateFromTemplate(i[h],h);var d=h.match(/\w+\|\+(\d+)/);if(d&&"number"==n(i[h])){var f=parseInt(d[1],10);i[h]+=f}}break;case"number":u=a?r:i;break;case"boolean":u=a?o()>=.5:i;break;case"string":if(i.length){u="",r=r||1;for(var p=0;r>p;p++)u+=i;for(var m=u.match(/@([A-Z_0-9\(\),]+)/g)||[],p=0;m.length>p;p++){var g=m[p];u=u.replace(g,e(g))}}else{u="";for(var p=0;r>p;p++)u+=String.fromCharCode(Math.floor(255*o()))}break;default:u=i}return u};var l=[.021768910889510606,.23762323165420307,.9079616118204306,.6534305309997466,.22049697572443694,.07687466163364898,.8017428775547905,.16165353264404825,.5124345671670483,.19337327636624613,.39963994200698416,.8012592654139514,.22474962687229938,.9791396234452399,.7965428353317756,.9777664340629622,.5135216702983731,.7407128236192145,.12880984991420075,.8186600800491484,.5187691445438851,.034723021925916586,.5625092833040853,.02502838571997701,.663696305503698,.3481608684353138,.8991623585175106,.3640542564277087,.8320766874121723,.012778915627689846,.1427680370061336,.9774408289203956,.010229381207667587,.2596610885223093,.6150540104297127,.7130773919030915,.8638338302974085,.6178483032907357,.980312844391733,.5007277415012348,.6348672031113127,.4400097775503303,.8468458451408212,.38724997893647317,.690237920987028,.19850102297146477,.44895115941315766,.22283381913760725,.031228117310125314,.3367510872581615,.28155752394210787,.14696694832580504,.08164635161760991,.8837733477785624,.4590179148539142,.9613195413217465,.11263127577456922,.743695635896287,.0002424891439143373,.1964622832546613,.7333363138878922,.5575568682003356,.20426374168098604,.18030934250338893,.9792636408392759,.30121911048336913,.7734906886720265,.6984051127767527,.6638058511379343,.3310956256388182,.36632372827973203,.8996494702333895,.8235917663049763,.418496734118911,.8164648495097332,.9457831606354686,.2845227542117049,.42374718399151545,.3431728911657228,.5289314006219973,.6029243600407113,.6528301140700757,.6948768236197832,.7887302784092911,.8950274196119906,.6121642239166305,.31797481561514696,.34903732589844216,.3580320092281766,.8312225728434115,.32331010157206974,.16395388672837796,.6072960306003872,.6580526967999424,.23472961545632742,.6138637855489343,.3067303339060682,.44935935129958315,.24729465243280668,.8244189715967711];t.mockJSON.data={NUMBER:"0123456789".split(""),LETTER_UPPER:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),LETTER_LOWER:"abcdefghijklmnopqrstuvwxyz".split(""),MALE_FIRST_NAME:["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"],FEMALE_FIRST_NAME:["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"],LAST_NAME:["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"],EMAIL:function(){return e("@LETTER_LOWER")+"."+e("@LAST_NAME").toLowerCase()+"@"+e("@LAST_NAME").toLowerCase()+".com"},DATE_YYYY:function(){var t=s().getFullYear();return t+""},DATE_DD:function(){return i(s().getDate())},DATE_MM:function(){return i(s().getMonth()+1)},TIME_HH:function(){return i(s().getHours())},TIME_MM:function(){return i(s().getMinutes())},TIME_SS:function(){return i(s().getSeconds())},LOREM:function(){var t="lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est laborum".split(" "),e=Math.floor(o()*t.length);return t[e]},LOREM_IPSUM:function(){for(var t="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum".split(" "),e=[],n=Math.floor(o()*t.length/2),i=0;n>i;i++){var s=Math.floor(o()*t.length);e.push(t[s])}return e.join(" ")}}})(jQuery),function(t){function e(e){var n=e.$elts.content.children(),i=0;n.each(function(){$item=t(this),$itemHeight=$item.outerHeight(),$itemHeight>i&&(i=$itemHeight)}),e.params.verticalMargin>0&&(i+=e.params.verticalMargin),n.height(i);var o=e.$elts.content.children(":first");e.itemWidth=o.outerWidth(),e.contentWidth="vertical"==e.params.direction?e.itemWidth:e.params.equalWidths?e.itemWidth*e.steps.count:function(){var n=0;return e.$elts.content.children().each(function(){n+=t(this).outerWidth()}),n}(),e.$elts.content.width(e.contentWidth),e.itemHeight=i,"vertical"==e.params.direction?(e.$elts.content.css({height:e.itemHeight*e.steps.count+"px"}),e.$elts.content.parent().css({height:e.itemHeight*e.params.dispItems+"px"})):e.$elts.content.parent().css({height:e.itemHeight+"px"}),c(e)}function n(e){e.$elts.nextBtn.add(e.$elts.prevBtn).bind("enable",function(){var n=t(this).unbind("click").bind("click",function(){e.params.ajaxMode&&n.is(".next")&&f(e)==d(e)-1&&!e.lastItemsToLoad?(m(e),e.$elts.content.ajaxSuccess(function(){})):(r(e,a(e,n.is(".next")?"next":"prev")),1==e.params.stopSlideBtn?e.$elts.stopSlideBtn.trigger("pause"):p(e))}).removeClass("disabled").removeAttr("disabled");e.params.combinedClasses&&n.removeClass("next-disabled previous-disabled").removeAttr("disabled")}).bind("disable",function(){var n=t(this).unbind("click").addClass("disabled").attr("disabled","disabled");e.params.combinedClasses&&(n.is(".next")?n.addClass("next-disabled"):n.is(".previous")&&n.addClass("previous-disabled"))}).hover(function(){t(this).toggleClass("hover")})}function i(e){e.$elts.pagination=t('<div class="center-wrap"><div class="carousel-pagination"><p></p></div></div>')["outside"==e.params.paginationPosition?"insertAfter":"appendTo"](e.$elts.carousel).find("p"),e.$elts.paginationBtns=t([]),e.$elts.content.find("li").each(function(t){0==t%e.params.dispItems&&o(e,t)})}function o(e,n){e.params.pagination&&(e.$elts.paginationBtns=e.$elts.paginationBtns.add(t('<a role="button"><span>'+e.params.tabLabel(e.$elts.paginationBtns.length+1)+"</span></a>").data("firstStep",n)).appendTo(e.$elts.pagination),e.$elts.paginationBtns.slice(0,1).addClass("active"),e.$elts.paginationBtns.click(function(){r(e,t(this).data("firstStep")),1==e.params.stopSlideBtn?e.$elts.stopSlideBtn.trigger("pause"):p(e)}))}function s(e){e.params.useAddress&&t.isFunction(t.fn.address)?t.address.init(function(){var n=t.address.pathNames();n[0]===e.params.adressIdentifier&&n[1]?r(e,n[1]-1):t.address.value("/"+e.params.adressIdentifier+"/1")}).change(function(){var n=t.address.pathNames();n[0]===e.params.adressIdentifier&&n[1]&&r(e,n[1]-1)}):e.params.useAddress=!1}function r(e,n){e.params.callback(n),l(e,n),e.steps.first=n,c(e),e.params.useAddress&&t.address.value("/"+e.params.adressIdentifier+"/"+(n+1))}function a(t,e){return"prev"==e?t.params.showEmptyItems?t.steps.first-1>=0?t.steps.first-1:t.params.loop?t.steps.count-1:!1:0==t.steps.first?t.params.loop?t.steps.count-1:!1:Math.max(0,t.steps.first-1):"next"==e?t.steps.first+t.params.dispItems<t.steps.count?t.params.showEmptyItems?t.steps.first+1:Math.min(t.steps.first+1,t.steps.count-1):t.params.loop?0:!1:void 0}function l(t,e){switch(t.params.effect){case"no":"vertical"==t.params.direction?t.$elts.content.css("top",-(t.itemHeight*e)+"px"):t.$elts.content.css("left",-(t.itemWidth*e)+"px");break;case"fade":"vertical"==t.params.direction?t.$elts.content.hide().css("top",-(t.itemHeight*e)+"px").fadeIn(t.params.animSpeed):t.$elts.content.hide().css("left",-(t.itemWidth*e)+"px").fadeIn(t.params.animSpeed);break;default:"vertical"==t.params.direction?t.$elts.content.stop().animate({top:-(t.itemHeight*e)+"px"},t.params.animSpeed,t.params.slideEasing):t.$elts.content.stop().animate({left:-(t.itemWidth*e)+"px"},t.params.animSpeed,t.params.slideEasing)}}function c(e){a(e,"prev")!==!1?e.$elts.prevBtn.trigger("enable"):e.$elts.prevBtn.trigger("disable"),a(e,"next")!==!1?e.$elts.nextBtn.trigger("enable"):e.$elts.nextBtn.trigger("disable"),e.params.pagination&&e.$elts.paginationBtns.removeClass("active").filter(function(){return t(this).data("firstStep")==e.steps.first}).addClass("active")}function u(t){t.delayAutoSlide=window.setTimeout(function(){t.autoSlideInterval=window.setInterval(function(){r(t,a(t,"next"))},t.params.autoSlideInterval)},t.params.delayAutoSlide)}function p(t){window.clearTimeout(t.delayAutoSlide),window.clearInterval(t.autoSlideInterval),t.params.delayAutoSlide=0}function h(t){var e=t.$elts.stopSlideBtn;e.bind({play:function(){u(t),e.removeClass("pause").addClass("play").html(t.params.stopSlideTextPause)},pause:function(){p(t),e.removeClass("play").addClass("pause").html(t.params.stopSlideTextPlay)}}),e.click(function(){e.is(".play")?e.trigger("pause"):e.is(".pause")&&e.trigger("play")}),e.prependTo(t.$elts.wrap)}function d(t){return t.$elts.pagination.children().length}function f(t){return t.steps.first/t.params.dispItems}function m(n){n.$elts.carousel.prepend(n.$elts.loader),t.ajax({url:n.params.ajaxUrl,dataType:"json",success:function(i){n.lastItemsToLoad=i.bLastItemsToLoad,t(n.$elts.content).append(i.shtml),n.steps={first:n.steps.first+n.params.dispItems,count:n.$elts.content.children().length},n.steps.last=n.steps.count-1,e(n),o(n,n.steps.first),r(n,n.steps.first),1==n.params.stopSlideBtn?n.$elts.stopSlideBtn.trigger("pause"):p(n),n.$elts.loader.remove()}})}t.fn.carousel=function(o){var o=t.extend({direction:"horizontal",loop:!1,dispItems:1,pagination:!1,paginationPosition:"inside",nextBtn:'<input type="button" value="Next" />',prevBtn:'<input type="button" value="Previous" />',btnsPosition:"inside",nextBtnInsert:"insertAfter",prevBtnInsert:"insertBefore",nextBtnInsertFn:!1,prevBtnInsertFn:!1,autoSlide:!1,autoSlideInterval:3e3,delayAutoSlide:!1,combinedClasses:!1,effect:"slide",slideEasing:"swing",animSpeed:300,equalWidths:"true",verticalMargin:0,callback:function(){},useAddress:!1,adressIdentifier:"carousel",tabLabel:function(t){return t},showEmptyItems:!0,ajaxMode:!1,ajaxUrl:"",stopSlideBtn:!1,stopSlideTextPause:"Pause",stopSlideTextPlay:"Play"},o);return"outside"==o.btnsPosition&&(o.prevBtnInsert="insertBefore",o.nextBtnInsert="insertAfter"),o.delayAutoSlide=0+o.delayAutoSlide,this.each(function(){var r={$elts:{},params:o,launchOnLoad:[]};r.$elts.carousel=t(this).addClass("js"),r.$elts.content=t(this).children().css({position:"absolute",top:0}),r.$elts.wrap=r.$elts.content.wrap('<div class="carousel-wrap"></div>').parent().css({overflow:"hidden",position:"relative"}),r.steps={first:0,count:r.$elts.content.children().length},r.$elts.loader=t('<div class="loader"></div>').css({position:"absolute"}),r.steps.last=r.steps.count-1,r.params.pagination&&i(r),r.$elts.prevBtn=t.isFunction(r.params.prevBtnInsertFn)?r.params.prevBtnInsertFn(r.$elts):"outside"==o.btnsPosition?t(o.prevBtn)[o.prevBtnInsert](r.$elts.carousel):t(o.prevBtn)[o.prevBtnInsert](r.$elts.wrap),r.$elts.nextBtn=t.isFunction(r.params.nextBtnInsertFn)?r.params.nextBtnInsertFn(r.$elts):"outside"==o.btnsPosition?t(o.nextBtn)[o.nextBtnInsert](r.$elts.carousel):t(o.nextBtn)[o.nextBtnInsert](r.$elts.wrap),r.$elts.nextBtn.addClass("carousel-control next carousel-next"),r.$elts.prevBtn.addClass("carousel-control previous carousel-previous"),r.lastItemsToLoad,n(r),r.$elts.carousel.attr("tabindex",0).add(r.$elts.carousel.children()).bind({focus:function(){t(document).bind("keypress",function(t){switch(t.keyCode){case 39:r.$elts.nextBtn.click();break;case 37:r.$elts.prevBtn.click()}switch(t.charCode){case 110:r.$elts.nextBtn.click();break;case 112:r.$elts.prevBtn.click()}})},blur:function(){t(document).unbind("keypress")}}),s(r),t(function(){e(r),t.each(r.launchOnLoad,function(t,e){e()}),r.params.autoSlide&&u(r),1==o.stopSlideBtn&&(r.$elts.stopSlideBtn=t('<button type="button" class="slide-control play">'+o.stopSlideTextPause+"</button>"),h(r))})})}}(jQuery);var HCF=function(t){return this.styles=null,this.header=null,this.footer=null,this.active=!1,this.contents=null,this.isSupportMQ=!1,this.hasHeightTable=!1,this.options=t||{},this.maxHeight=screen.height,this.headerHeight=this.footerHeight=0,this.init(),{stop:this.getFn("stop"),start:this.getFn("start"),recheck:this.getFn("recheck"),elements:{header:this.header,contents:this.contents,footer:this.footer}}};HCF.prototype={init:function(){var t=function(e){if(e){if("string"==typeof e)return $(e);if(e instanceof $){var n=null;if(e.length>1)for(var i,o=0,s=e.length;s>o;o++)i=e.eq(o),n=n?n.add(t(i)):t(i);else n=e;return n}}return e};this.id=+new Date,this.header=t(this.options.header).first(),this.contents=t(this.options.contents),this.footer=t(this.options.footer).first(),this.isSupportMQ=this.checkMQ(),this.options.deferred||this.start()},start:function(){this.active||(this.active=!0,$(window).on("resize.hcf-"+this.id,this.getFn("recheck")),this.recheck())},stop:function(){this.active=!1,$(window).off(".hcf-"+this.id),this.removeHeightTable()},checkMQ:function(){var t=$('<div id="mq-test-dummy">'),e=$('<style type="text/css">@media only all{#mq-test-dummy{width:10px}}</style>'),n=!1;return t.css({top:-1e3,position:"absolute"}).appendTo("body"),e.appendTo("head"),10==t.width()&&(n=!0),t.remove(),e.remove(),n},getFn:function(t){var e=this[t],n=this;return function(){return"function"==typeof e?e.apply(n,arguments):void 0}},recheck:function(t){if(this.active||t){var e=this.header,n=this.footer,i=e.outerHeight(),o=n.outerHeight();return this.isSupportMQ?(this.headerHeight&&this.headerHeight==i||(this.headerHeight=i,this.removeHeightTable()),this.footerHeight&&this.footerHeight==o||(this.footerHeight=o,this.removeHeightTable())):(this.headerHeight=i,this.footerHeight=o,this.removeHeightTable()),this.hasHeightTable||this.createHeightTable(),!0}return!1},generateHeightTable:function(t){var e=this.headerHeight+this.footerHeight;if(this.isSupportMQ){var n="string"==typeof this.options.contents?this.options.contents:!!this.options.contents.join&&this.options.contents.join(", "),i="";n||(n=".hcf-"+this.id,this.contents.addClass(n.slice(1))),i+=n+"{height:0px} ";for(var o=e;this.maxHeight>o;o++)i+="@media screen and (height:"+o+"px){"+n+"{height:"+(o-e)+"px}} ";t.html(i)}else{var s=this.getBrowserSizes();this.contents.height(s.y-e)}},getBrowserSizes:function(){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return{x:t.innerWidth||n.clientWidth||i.clientWidth,y:t.innerHeight||n.clientHeight||i.clientHeight}},createHeightTable:function(){this.isSupportMQ?(this.styles=$('<style type="text/css">'),this.generateHeightTable(this.styles),this.styles.appendTo("head")):this.generateHeightTable(),this.hasHeightTable=!0},removeHeightTable:function(){this.styles&&this.styles.remove(),this.hasHeightTable=!1}},$.mockJSON.random=!1,$.mockJSON(/Get\/Alternatives/,{Success:!0,"Response|5-10":[{image:"static/img/photos/product_1.jpg","price|1000-9000":0}]}),App.Helpers.push(function(t,e){var n=e.templates.photo,i=e.templates.switcher,o=e.templates.infoPhoto;n&&t.registerHelper("photo",function(e,i){e||(e={}),i||(i={});for(var o in i.hash)i.hash.hasOwnProperty(o)&&(e[o]=i.hash[o]);if(null!=e.position)for(o in e.position)e.position.hasOwnProperty(o)&&(e[o]=e.position[o]);return null!=e.iterateClass&&("string"!=typeof e.className&&(i.hash.className=""),e.className+=" b-photo-id"+e.id),new t.SafeString(n(e))}),i&&t.registerHelper("switcher",function(e){return new t.SafeString(i(e))}),o&&t.registerHelper("infoPhoto",function(e){return new t.SafeString(o(e))})});