/**
 * Marrow - v0.3.6-179 (build date: 15/05/2013)
 * Sandbox webapp loading framework with conditional recipes
 * Copyright (c) 2013 Anton Ignatov <abietis@gmail.com>
 */
window.AppConstructor=function(t){_.extend(this,{errorHandler:function(t,n,e){return this.debugMode?(alert('"'+t+'" on line: '+e+" in "+n),!1):!0},pritifyPrice:function(t){if(isNaN(t))return t;t+="";var n=t.split(/,|\./);if(n.length>2)return 0/0;n[1]=n[1]?","+n[1]:"",t=n[0];var e=t.length%3,o=t.substr(0,e),i=t.slice(e);return(o+i.replace(/(\d{1,3})/g," $1")+n[1]).replace(/^\s+|\s+$/g,"")},getDeclension:function(t,n){var e,o="";return null!=t&&null!=n&&3==n.length&&(t=Math.abs(t),e=t%100,e>=5&&20>=e&&(o=n[2]),e%=10,1==e&&(o=n[0]),e>=2&&4>=e&&(o=n[1])),o},placeCaretAtEnd:function(t){this.placeCaretAt(t,t.value.length)},placeCaretAt:function(t,n){var e=n,o=n;if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,o);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",o),i.moveStart("character",e),i.select()}},preloadImages:function(t,n,e){if(t=$(t||document.createElement("img")),e||(e={}),t.length&&(n||e.getUrl)){var o=this,i=function(){var t=$(this).off(".preloader");"function"==typeof e.onLoad&&e.onLoad(t)},r=function(t,n,o){(!t.attr("src")||e.forceLoad)&&(t.attr("src",n),t[0].complete?o.call(t[0],{}):t.on("load.preloader",o).on("error.preloader",function(){var t=$(this).off(".preloader");"function"==typeof e.onError&&e.onError(t)}))},s=function(t,n,i){"function"==typeof e.onStart?e.onStart(t,o.bind(function(){r(this.t,this.u,this.h)},{u:n,t:t,h:i})):r(t,n,i)};if("object"==typeof n&&(e=n,n=null),"string"==typeof n)s(t,n,i);else if("function"==typeof e.getUrl)for(var a,c=0,u=t.length;u>c;c++)a=t.eq(c),s(a,e.getUrl(a),i)}}},t)};