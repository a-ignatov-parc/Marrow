/**
 * Marrow - v0.3.3-4 (build date: 28/05/2013)
 * https://github.com/a-ignatov-parc/Marrow
 * Sandbox webapp loading framework with conditional recipes
 * Copyright (c) 2013 Anton Ignatov <abietis@gmail.com>
 */
App.Routers.Workspace=App.Backbone.Router.extend({defaultPage:"gallery",namedParam:/:\w+/g,splatParam:/\*\w+/g,escapeRegExp:/[\-\[\]{}()+?.,\\\^$|#\s]/g,routes:{"":"gallery",index:"index",gallery:"gallery","gallery/:type":"gallery","gallery/:type/:id":"gallery",repair_map:"repairMap",apartment_plan:"apartmentPlan","apartment_plan/:id":"apartmentPlan",":page":"processWrongRoute"},initialize:function(){this.prevRoute="",this.currentRoute=""},createBundles:function(t){this.core.set("User",{view:NO,initData:t.User}).set("Gallery",{model:NO}).set("Popup",{model:NO,multiple:YES}).set("Hint",{model:NO,multiple:YES}).set("Pad",{model:NO,multiple:YES})},processWrongRoute:function(){this.navigate(this.defaultPage)},checkData:function(){return YES},index:function(){var t="index",e=[t];this.checkData(t)&&(this.navigate(e.join("/")),this.core.unload().renderStream(["Header"]))},repairMap:function(){var t="repair_map",e=[t];this.checkData(t)&&(this.navigate(e.join("/")),this.core.unload().renderStream(["Header","RepairInfo"]))},apartmentPlan:function(t){var e="apartment_plan",n=[e];null!=t&&n.push(t),this.checkData(e)&&(this.navigate(n.join("/")),this.core.unload().renderStream(["Header"]),null!=t?this.core.render("Plan",{planId:t}):this.core.render("ApartmentPlan"))},gallery:function(t,e){var n="gallery",o=[n];null!=t&&o.push(t),null!=e&&o.push(e),this.checkData(n)&&(this.navigate(o.join("/")),this.core.unload().render("Gallery"))}}),App.Views.Workspace=App.Backbone.View.extend({className:"l-content-container l-content",template:"workspace",initialize:function(){this.layouts={},this.render(),this.core.container.addClass("l-app_is_ready")},setListeners:function(){this.core.router.on("route:after_change",this.onChangeRoute,this)},onMouseDown:function(t){this.core.observatory.trigger("global.mousedown",t)},render:function(){this.$el.append(this.template()).appendTo(this.core.container),this.layouts={header:this.$el.find("#l-header"),contents:this.$el.find("#l-body"),footer:this.$el.find("#l-footer"),start:this.__bind(function(){this.recalc()},this),stop:this.__bind(function(){this.recalc(YES)},this)},this.__links("layouts",this.layouts),this.__links("recalc",this.__bind(this.recalc,this))},recalc:function(t){var e=t?0:this.layouts.footer.outerHeight();this.layouts.footer.css({height:e,marginTop:-e}),this.layouts.contents.css("padding-bottom",e)},onChangeRoute:function(t,e){this.core.container.removeClass("l-"+t+"_route").addClass("l-"+e+"_route"),this.recalc()}});var glob="undefined"==typeof window?global:window,Handlebars=glob.Handlebars||require("handlebars");this.App=this.App||{},this.App.Templates=this.App.Templates||{},this.App.Templates.galleryList=Handlebars.template(function(t,e,n,o,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||{},'<ul>\n	<li>\n		<img src="http://farm4.static.flickr.com/3639/3319814586_dd9c1141dd.jpg?v=0" alt="example pic flicker 2" width="500" height="335" /> <cite><a class="image_link" href="/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/tanchristianr/">Don Takz</a></cite>\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_notsogoodphotography.jpg" alt="example pic flicker 1" width="500" height="335" /> <cite><a href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> Par <a href="http://www.flickr.com/photos/notsogoodphotography/">notsogoodphotography</a></cite>\n\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_junku.jpg" alt="example pic flicker 2" width="500" height="335" /> <cite><a href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/junku-newcleus/">junku-newcleus</a></cite>\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_pmorgan.jpg" alt="example pic flicker 2" width="500" height="335" /> <cite><a class="image_link" href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/pmorgan/">pmorgan</a></cite>\n\n	</li>\n</ul>'}),this.App.Templates.workspace=Handlebars.template(function(t,e,n,o,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||t.helpers,i=i||{},'<div class="l-header" id="l-header"></div>\n<div class="l-content g-scrollable" id="l-body"></div>\n<div class="l-footer" id="l-footer"></div>'}),"object"==typeof exports&&exports&&(module.exports=this.App.Templates),App.Views.Gallery=App.Backbone.View.extend({className:"carousel example-1",template:"galleryList",initialize:function(){this.render()},render:function(){this.$el.html(this.template()).appendTo(this.__aliases.layouts.contents).carousel()}});