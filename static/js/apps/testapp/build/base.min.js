App.Routers.Workspace=App.Backbone.Router.extend({defaultPage:"gallery",namedParam:/:\w+/g,splatParam:/\*\w+/g,escapeRegExp:/[\-\[\]{}()+?.,\\\^$|#\s]/g,routes:{"":"gallery",index:"index",gallery:"gallery","gallery/:type":"gallery","gallery/:type/:id":"gallery",repair_map:"repairMap",apartment_plan:"apartmentPlan","apartment_plan/:id":"apartmentPlan",":page":"processWrongRoute"},initialize:function(){this.prevRoute="",this.currentRoute=""},createBundles:function(a){this.core.set("User",{view:NO,initData:a.User}).set("Gallery",{model:NO}).set("Popup",{model:NO,multiple:YES}).set("Hint",{model:NO,multiple:YES}).set("Pad",{model:NO,multiple:YES})},processWrongRoute:function(){this.navigate(this.defaultPage)},checkData:function(){return YES},index:function(){var a="index",b=[a];this.checkData(a)&&(this.navigate(b.join("/")),this.core.unload().renderStream(["Header"]))},repairMap:function(){var a="repair_map",b=[a];this.checkData(a)&&(this.navigate(b.join("/")),this.core.unload().renderStream(["Header","RepairInfo"]))},apartmentPlan:function(a){var b="apartment_plan",c=[b];null!=a&&c.push(a),this.checkData(b)&&(this.navigate(c.join("/")),this.core.unload().renderStream(["Header"]),null!=a?this.core.render("Plan",{planId:a}):this.core.render("ApartmentPlan"))},gallery:function(a,b){var c="gallery",d=[c];null!=a&&d.push(a),null!=b&&d.push(b),this.checkData(c)&&(this.navigate(d.join("/")),this.core.unload().render("Gallery"))}}),App.Views.Workspace=App.Backbone.View.extend({className:"l-content-container l-content",template:"workspace",initialize:function(){this.layouts={},this.render(),this.core.container.addClass("l-app_is_ready")},setListeners:function(){this.core.router.on("route:after_change",this.onChangeRoute,this)},onMouseDown:function(a){this.core.observatory.trigger("global.mousedown",a)},render:function(){this.$el.append(this.template()).appendTo(this.core.container),this.layouts={header:this.$el.find("#l-header"),contents:this.$el.find("#l-body"),footer:this.$el.find("#l-footer"),start:this.__bind(function(){this.recalc()},this),stop:this.__bind(function(){this.recalc(YES)},this)},this.__links("layouts",this.layouts),this.__links("recalc",this.__bind(this.recalc,this))},recalc:function(a){var b=a?0:this.layouts.footer.outerHeight();this.layouts.footer.css({height:b,marginTop:-b}),this.layouts.contents.css("padding-bottom",b)},onChangeRoute:function(a,b){this.core.container.removeClass("l-"+a+"_route").addClass("l-"+b+"_route"),this.recalc()}});var glob="undefined"==typeof window?global:window,Handlebars=glob.Handlebars||require("handlebars");this.App=this.App||{},this.App.Templates=this.App.Templates||{},this.App.Templates.galleryList=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<ul>\n	<li>\n		<img src="http://farm4.static.flickr.com/3639/3319814586_dd9c1141dd.jpg?v=0" alt="example pic flicker 2" width="500" height="335" /> <cite><a class="image_link" href="/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/tanchristianr/">Don Takz</a></cite>\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_notsogoodphotography.jpg" alt="example pic flicker 1" width="500" height="335" /> <cite><a href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> Par <a href="http://www.flickr.com/photos/notsogoodphotography/">notsogoodphotography</a></cite>\n\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_junku.jpg" alt="example pic flicker 2" width="500" height="335" /> <cite><a href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/junku-newcleus/">junku-newcleus</a></cite>\n	</li>\n	<li>\n		<img src="http://l.yimg.com/g/images/home_photo_pmorgan.jpg" alt="example pic flicker 2" width="500" height="335" /> <cite><a class="image_link" href="http://www.flickr.com/creativecommons/"><img width="16" height="16" class="trans_png" alt="Licence Creative Commons" src="http://l.yimg.com/g/images/home_cc.png"/></a> By <a href="http://www.flickr.com/photos/pmorgan/">pmorgan</a></cite>\n\n	</li>\n</ul>'}),this.App.Templates.workspace=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="l-header" id="l-header"></div>\n<div class="l-content g-scrollable" id="l-body"></div>\n<div class="l-footer" id="l-footer"></div>'}),"object"==typeof exports&&exports&&(module.exports=this.App.Templates),App.Views.Gallery=App.Backbone.View.extend({className:"carousel example-1",template:"galleryList",initialize:function(){this.render()},render:function(){this.$el.html(this.template()).appendTo(this.__aliases.layouts.contents).carousel()}});