/**
 * Marrow - v0.3.6-176 (build date: 15/05/2013)
 * Sandbox webapp loading framework with conditional recipes
 * Copyright (c) 2013 Anton Ignatov <abietis@gmail.com>
 */
window.WebApp||(window.WebApp={}),window.WebApp.Loader=function(t,n){var e=null;if(this.options=n||{loadOptions:{}},this.global=window.WebApp,this.sandboxWindow=null,this.rootHost=null,this.loader=null,this.iframe=null,e=this.global[t],e&&"object"==typeof e){this.options.loadOptions||(this.options.loadOptions={});for(var o in e)e.hasOwnProperty(o)&&(this.options.loadOptions[o]=e[o])}this.options.namespace=t,this.options.noCache="?no_cache="+ +new Date,this.options.loadOptions.locations||(this.options.loadOptions.locations={}),this.options.loadOptions.disableTransits||(this.options.loadOptions.disableTransits={}),this.options.loadOptions.locations.app?this.rootHost=this.options.loadOptions.locations.app:(this.rootHost=location.protocol+"//",this.rootHost+=location.hostname,this.rootHost+=""===location.port?"":":"+location.port,this.rootHost+="/"),this.appName=this.options.namespace,this.appPath=["apps",this.appName.toLowerCase()].join("/"),this.init()},window.WebApp.Loader.prototype={constructor:window.WebApp.Loader,init:function(){this.createDefaults(),this.createSandbox(function(t){this.createLoader(window,t),this.loadAppCore(t)})},createSandbox:function(t){var n=this.bind(function(){this.sandboxWindow=this.iframe.contentWindow,this.sandboxWindow.document.body.appendChild(document.createElement("script")),"function"==typeof t&&t.call(this,this.sandboxWindow)},this);this.iframe=document.createElement("iframe"),this.iframe.style.display="none",this.iframe.src=this.options.hosts.html+"sandbox.html",this.iframe.tabIndex=-1,this.iframe.addEventListener?this.iframe.addEventListener("load",n,!1):this.iframe.attachEvent?this.iframe.attachEvent("onload",n):this.iframe.onload=n,window.DomReady||this.setDomReady(),"complete"===document.readyState?document.body.appendChild(this.iframe):DomReady.ready(this.bind(function(){document.body.appendChild(this.iframe)},this))},loadDependencies:function(t,n,e){var o,i=[];t.JSON||i.push("system/json2.js"),t.Object.keys||i.push("system/es5-shim.min.js"),t.Modernizr||i.push("system/modernizr.min.js"),n&&"function"==typeof n.Dependencies&&(o=n.Dependencies(t),o&&(i=i.concat(o))),this.loader(i,e||function(){})},loadAppCore:function(t){var n=this.appName.toLowerCase(),e=this.options.loadOptions.resources||{},o=[];this.options.debugMode?o.push(n+".js","root/marrow.js!order"):o.push("build/"+n+".min.js","root/marrow.min.js!order"),o.push("recipe/recipe.js!order"),e.styles&&this.loader(e.styles,!0),this.loader(o,this.bind(function(){this.loadDependencies(t||window,t.WebApp,this.bind(function(){e.common?this.loader(e.common,this.bind(function(){this.initApp(t.AppConstructor)},this),!0):this.initApp(t.AppConstructor)},this))},this))},createDefaults:function(){var t=this.options.loadOptions.locations.static||this.rootHost;this.options.rootHost=this.rootHost,this.options.hosts={services:this.options.loadOptions.locations.services||{},request:this.rootHost,init:this.options.loadOptions.locations.parent||this.rootHost,js:t+"static/js/",img:t+"static/img/",html:t+"static/html/",css:t+"static/styles/css/"},this.options.strictMode=this.options.loadOptions.strictMode,this.options.debugMode=this.options.loadOptions.debugMode},initApp:function(t){var n=this.sandboxWindow.WebApp.Recipe,e=this.sandboxWindow.WebApp.Core,o=this.bind(function(){var t=null;window[this.appName+(window[this.appName]?this.sandboxWindow.App.generateId():"")]=this.sandboxWindow.App.init(this.options.bootstrapData),i&&i.defered&&("function"==typeof this.sandboxWindow.App.afterDefered&&(t=this.sandboxWindow.App.afterDefered),this.loader(i.defered,this.bind(t,this.sandboxWindow.App),!0))},this),i=this.options.loadOptions.resources,r=[];n.prototype=new e(this.sandboxWindow.WebApp,window,this.sandboxWindow),t.prototype=new n(this.sandboxWindow.WebApp,window,this.sandboxWindow,this.options),this.sandboxWindow.App=new t(this.options),i&&(this.options.debugMode?(i.sandbox&&(r=i.sandbox.concat(r)),i.helpers&&(r=r.concat(i.helpers)),i.app&&(r=r.concat(i.app))):((i.sandbox||i.helpers)&&r.push("build/libs.min.js"),i.app&&r.push("build/base.min.js"))),this.loader(r,o)},setPrefixes:function(t){"string"==typeof t&&(t=[t]);for(var n=0,e=t.length;e>n;n++)t[n].indexOf(".js")>=0?(t[n]="js!"+t[n],0>t[n].indexOf("!order")&&(t[n]+="!order")):t[n].indexOf(".css")>=0&&(t[n]="link!"+t[n]);return t},createLoader:function(t,n){var e=this,o=this.appName.toLowerCase(),i=this.createLoaderInstance(t),r=this.createLoaderInstance(n);this.loader=function(t,n){var i=e.options.loadOptions.recipe||"simple";return e.options.debugMode&&console.info("Using recipe: "+i),function(r,a,s){r=e.setPrefixes(r),"boolean"==typeof a&&2===arguments.length&&(s=a,a=null),s?n.curl.call(n,{baseUrl:e.options.hosts.js,paths:{system:e.options.hosts.js+"libs",styles:e.options.hosts.css+"global","styles/app":e.options.hosts.css+o}},r,a):t.curl.call(t,{baseUrl:e.options.hosts.js+e.appPath,paths:{root:e.options.hosts.js,core:e.options.hosts.js+"core",system:e.options.hosts.js+"libs",recipes:e.options.hosts.js+"recipes",helpers:e.options.hosts.js+"helpers",recipe:e.options.hosts.js+"recipes/"+i,recipe_libs:e.options.hosts.js+"recipes/"+i+"/libs"}},r,a)}}(r,i),this.options._loader=this.loader},createLoaderInstance:function(scope){return scope.curl||function(){function r(){}function t(t,n){return 0==aa.call(t).indexOf("[object "+n)}function u(t){return t&&"/"==t.charAt(t.length-1)?t.substr(0,t.length-1):t}function ba(t,n){var e,o,i,r;return e=1,o=t,"."==o.charAt(0)&&(i=h,o=o.replace(ca,function(t,n,o,i){return o&&e++,i||""})),i?(i=n.split("/"),r=i.length-e,0>r?t:(i.splice(r,e),i.concat(o||[]).join("/"))):o}function w(t){var n=t.indexOf("!");return{l:t.substr(n+1),j:n>=0&&t.substr(0,n)}}function y(){}function z(t,n){y.prototype=t||A;var e=new y;y.prototype=A;for(var o in n)e[o]=n[o];return e}function B(){function t(t,n,e){i.push([t,n,e])}function e(t,n){for(var e,o=0;e=i[o++];)(e=e[t])&&e(n)}var o,i,a;o=this,i=[],a=function(n,o){t=n?function(t){t&&t(o)}:function(t,n){n&&n(o)},a=r,e(n?0:1,o),e=r,i=D},this.z=function(n,e,o){t(n,e,o)},this.g=function(t){o.w=t,a(h,t)},this.d=function(t){o.oa=t,a(n,t)},this.t=function(t){e(2,t)}}function E(t,n,e,o){t instanceof B?t.z(n,e,o):n(t)}function F(t,n,e){var o;return function(){return--t>=0&&n&&(o=n.apply(D,arguments)),0==t&&e&&e(o),o}}function G(){var n,e=[].slice.call(arguments);return t(e[0],"Object")&&(n=e.shift(),H(n)),new da(e[0],e[1],e[2])}function H(t){t&&(I.P(t),J=I.b(t),I.S(t),"main"in t&&setTimeout(function(){var n;n=I.f(J,D,[].concat(t.main)),I.h(n)},0))}function da(t,n,e,o){var i;i=I.f(J,D,[].concat(t)),this.then=t=function(t,n){return E(i,function(n){t&&t.apply(D,n)},function(t){if(!n)throw t;n(t)}),this},this.next=function(t,n,e){return new da(t,n,e,i)},this.config=H,(n||e)&&t(n,e),E(o,function(){I.h(i)})}function ea(t){var e,o;if(e=t.id,e==D&&(K!==D?K={F:"Multiple anonymous defines in url"}:(e=I.ba())||(K=t)),e!=D){if(o=L[e],e in L||(o=I.k(e,J),o=I.B(o.b,e),L[e]=o),!(o instanceof B))throw Error("duplicate define: "+e);o.ga=n,I.C(o,t)}}function M(){var t=I.Z(arguments);ea(t)}function pa(a){try{return eval(a)}catch(b){}}function sa(){var t;return t=W[ta]("link"),t.rel="stylesheet",t.type="text/css",t}function ua(t,n,e){va.push({url:t,R:n,U:function(){e(Error(wa))}}),t=xa.shift(),!t&&za>ya.length&&(t=W.createElement("style"),ya.push(t),X.appendChild(t)),t&&Y(t)}function Y(t){var n,e;n=va.shift(),e=t.styleSheet,n?(t.onload=function(){n.R(n.ea),Y(t)},t.onerror=function(){n.U(),Y(t)},n.ea=e.imports[e.addImport(n.url)]):(t.onload=t.onerror=Z,xa.push(t))}function Aa(t,e,o){if(!$.load){var i,r,a;if(!t.href||W.readyState&&"complete"!=W.readyState)i=n;else{i=n;try{(r=t.sheet)&&(a=r.cssRules,i=null===a,!i&&a&&(r.insertRule("-curl-css-test {}",0),r.deleteRule(0),i=h))}catch(s){i="[object Opera]"!=Object.prototype.toString.call(window.opera)&&/security|denied/i.test(s.message)}}i?o(t.sheet):t.onload==Z||!t.onload||Ba(function(){Aa(t,e,o)},e)}}function Ca(t,n,e,o){function i(){if(r.onload!=Z&&r.onload){r.onload=r.onerror=Z;var t=function(){W.readyState&&"complete"!=W.readyState?Ba(t,10):n(r.sheet)};t()}}var r;r=sa(),r.onload=function(){$.load=$.load||h,i()},Aa(r,o,i),r.onerror=function(){$.error=$.error||h,r.onload!=Z&&r.onload&&(r.onload=r.onerror=Z,e(Error(wa)))},r.href=t,X.appendChild(r)}function Z(){}var h=!0,n=!1,q=this.window||"undefined"!=typeof global&&global||this,J,N,O,P=q.document,Q=P&&(P.head||P.getElementsByTagName("head")[0]),fa=Q&&Q.getElementsByTagName("base")[0]||null,ia={},ja={},R={},ka="addEventListener"in q?{}:{loaded:1,complete:1},A={},aa=A.toString,D,L={},S={},T=n,K,la=/^\/|^[^:]+:\/\//,ca=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,ma=/\/\*[\s\S]*?\*\/|(?:[^\\])\/\/.*?[\n\r]/g,na=/require\s*\(\s*["']([^"']+)["']\s*\)|(?:[^\\]?)(["'])/g,U,I;I={m:function(t,n,e){var o;return t=ba(t,n),"."==t.charAt(0)?t:(o=w(t),t=(n=o.j)||o.l,t in e.c&&(t=e.c[t].K||t),n&&(0>n.indexOf("/")&&!(n in e.c)&&(t=u(e.N)+"/"+n),t=t+"!"+o.l),t)},f:function(n,e,o,i){function r(t){return I.m(t,s.id,n)}function a(e,o,a){var c;if(c=o&&function(t){o.apply(D,t)},t(e,"String")){if(c)throw Error("require(id, callback) not allowed");if(a=r(e),e=L[a],!(a in L))throw Error("Module not resolved: "+a);return(a=e instanceof B&&e.a)||e}E(I.h(I.f(n,s.id,e,i)),c,a)}var s;return s=new B,s.id=e||"",s.ca=i,s.D=o,s.b=n,s.u=a,a.toUrl=function(t){return I.k(r(t),n).url},s.m=r,s},B:function(t,n,e){var o,i,r;return o=I.f(t,n,D,e),i=o.g,r=F(1,function(t){o.p=t;try{return I.V(o)}catch(n){o.d(n)}}),o.g=function(t){E(e||T,function(){i(L[o.id]=S[o.url]=r(t))})},o.G=function(t){E(e||T,function(){o.a&&(r(t),o.t(ja))})},o},T:function(t,n,e,o){return I.f(t,e,D,o)},aa:function(t){return t.u},H:function(t){return t.a||(t.a={})},$:function(t){var n=t.q;return n||(n=t.q={id:t.id,uri:I.I(t),exports:I.H(t),config:function(){return t.b}},n.a=n.exports),n},I:function(t){return t.url||(t.url=I.A(t.u.toUrl(t.id),t.b))},P:function(n){var e,o,i,r,a;if(e="curl",o="curlDefine",i=r=q,n&&(a=n.overwriteApi||n.ma,e=n.apiName||n.ia||e,i=n.apiContext||n.ha||i,o=n.defineName||n.ka||o,r=n.defineContext||n.ja||r,N&&t(N,"Function")&&(q.curl=N),N=null,O&&t(O,"Function")&&(q.define=O),O=null,!a)){if(i[e]&&i[e]!=G)throw Error(e+" already exists");if(r[o]&&r[o]!=M)throw Error(o+" already exists")}i[e]=G,r[o]=M},b:function(e){function o(n,e){var o,i,r,c,l;for(l in n){if(r=n[l],t(r,"String")&&(r={path:n[l]}),r.name=r.name||l,c=a,i=w(u(r.name)),o=i.l,(i=i.j)&&(c=s[i],c||(c=s[i]=z(a),c.c=z(a.c),c.e=[]),delete n[l]),e){i=r;var d=void 0;i.path=u(i.path||i.location||""),d=i.main||"./main","."==d.charAt(0)||(d="./"+d),i.K=ba(d,i.name+"/"),i.b=i.config,i.b&&(i.b=z(a,i.b))}else i={path:u(r.path)};i.Q=o.split("/").length,o?(c.c[o]=i,c.e.push(o)):c.n=I.O(r.path,a)}}function i(t){var n=t.c;t.M=RegExp("^("+t.e.sort(function(t,e){return n[e].Q-n[t].Q}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)"),delete t.e}var r,a,s,c;"baseUrl"in e&&(e.n=e.baseUrl),"main"in e&&(e.K=e.main),"preloads"in e&&(e.na=e.preloads),"pluginPath"in e&&(e.N=e.pluginPath),("dontAddFileExt"in e||e.i)&&(e.i=RegExp(e.dontAddFileExt||e.i)),r=J,a=z(r,e),a.c=z(r.c),s=e.plugins||{},a.plugins=z(r.plugins),a.s=z(r.s,e.s),a.r=z(r.r,e.r),a.e=[],o(e.packages,h),o(e.paths,n);for(c in s)e=I.m(c+"!","",a),a.plugins[e.substr(0,e.length-1)]=s[c];s=a.plugins;for(c in s)s[c]=z(a,s[c]),(e=s[c].e)&&(s[c].e=e.concat(a.e),i(s[c]));for(c in r.c)a.c.hasOwnProperty(c)||a.e.push(c);return i(a),a},S:function(t){var n;(n=t&&t.preloads)&&n.length>0&&E(T,function(){T=I.h(I.f(J,D,n,h))})},k:function(t,n){var e,o,i,r;return e=n.c,i=la.test(t)?t:t.replace(n.M,function(t){return o=e[t]||{},r=o.b,o.path||""}),{b:r||J,url:I.O(i,n)}},O:function(t,n){var e=n.n;return e&&!la.test(t)?u(e)+"/"+t:t},A:function(t,n){return t+((n||J).i.test(t)?"":".js")},J:function(t,n,e){var o=P.createElement("script");return o.onload=o.onreadystatechange=function(e){e=e||q.event,("load"==e.type||ka[o.readyState])&&(delete R[t.id],o.onload=o.onreadystatechange=o.onerror="",n())},o.onerror=function(){e(Error("Syntax or http error: "+t.url))},o.type=t.L||"text/javascript",o.charset="utf-8",o.async=!t.da,o.src=t.url,R[t.id]=o,Q.insertBefore(o,fa),o},W:function(t){var n,e=[];return("string"==typeof t?t:t.toSource?t.toSource():""+t).replace(ma,"").replace(na,function(t,o,i){return i?n=n==i?D:n:n||e.push(o),""}),e},Z:function(n){var e,o,i,r,a,s;return a=n.length,i=n[a-1],r=t(i,"Function")?i.length:-1,2==a?t(n[0],"Array")?o=n[0]:e=n[0]:3==a&&(e=n[0],o=n[1]),!o&&r>0&&(s=h,o=["require","exports","module"].slice(0,r).concat(I.W(i))),{id:e,p:o||[],v:r>=0?i:function(){return i},o:s}},V:function(t){var n;return n=t.v.apply(t.o?t.a:D,t.p),n===D&&t.a&&(n=t.q?t.a=t.q.a:t.a),n},C:function(t,n){t.v=n.v,t.o=n.o,t.D=n.p,I.h(t)},h:function(t){function n(t,n,e){a[n]=t,e&&u(t,n)}function e(n,e){var o,i,r,a;o=F(1,function(t){i(t),l(t,e)}),i=F(1,function(t){u(t,e)}),r=I.X(n,t),(a=r instanceof B&&r.a)&&i(a),E(r,o,t.d,t.a&&function(t){r.a&&(t==ia?i(r.a):t==ja&&o(r.a))})}function o(){t.g(a)}var i,r,a,s,c,u,l;for(a=[],r=t.D,s=r.length,0==r.length&&o(),u=F(s,n,function(){t.G&&t.G(a)}),l=F(s,n,o),i=0;s>i;i++)c=r[i],c in U?(l(U[c](t),i,h),t.a&&t.t(ia)):c?e(c,i):l(D,i,h);return t},Y:function(t){return I.I(t),I.J(t,function(){var e=K;K=D,t.ga!==n&&(!e||e.F?t.d(Error(e&&e.F||"define() missing or duplicated: "+t.url)):I.C(t,e))},t.d),t},X:function(t,n){var e,o,i,r,a,s,c,u,l,d,p;return e=n.m,o=n.ca,i=n.b||J,r=w(e(t)),c=r.l,a=r.j||c,u=I.k(a,i),r.j?s=a:(s=u.b.moduleLoader||u.b.la)&&(c=a,a=s,u=I.k(s,i)),a in L?l=L[a]:u.url in S?l=L[a]=S[u.url]:(l=I.B(u.b,a,o),l.url=I.A(u.url,u.b),L[a]=S[u.url]=l,I.Y(l)),a==s&&(d=new B,p=i.plugins[s]||i,E(l,function(t){var n,i,r;if(r=t.dynamic,c="normalize"in t?t.normalize(c,e,l.b)||"":e(c),i=s+"!"+c,n=L[i],!(i in L)){n=I.T(p,i,c,o),r||(L[i]=n);var a=function(t){n.g(t),r||(L[i]=t)};a.resolve=a,a.reject=a.error=n.d,t.load(c,n.u,a,p)}d!=n&&E(n,d.g,d.d,d.t)},d.d)),d||l},ba:function(){var n;if(!t(q.opera,"Opera"))for(var e in R)if("interactive"==R[e].readyState){n=e;break}return n}},U={require:I.aa,exports:I.H,module:I.$},G.version="0.7.3",G.config=H,M.amd={plugins:h,jQuery:h,curl:"0.7.3"},J={n:"",N:"curl/plugin",i:/\?|\.js\b/,s:{},r:{},plugins:{},c:{},M:/$^/},N=q.curl,O=q.define,!N||t(N,"Function")?I.P():(q.curl=D,H(N)),L.curl=G,L["curl/_privileged"]={core:I,cache:L,config:function(){return J},_define:ea,_curl:G,Promise:B};var oa=this.document;this.curlDefine("curl/plugin/js",["curl/_privileged"],function(t){function n(n,e,o){function i(){a||(new Date>r?o():setTimeout(i,10))}var r,a,s;r=(new Date).valueOf()+(n.fa||3e5),o&&n.a&&setTimeout(i,10),s=t.core.J(n,function(){a=h,n.a&&(n.w=pa(n.a)),!n.a||n.w?e(s):o()},function(t){a=h,o(t)})}function e(t,o){n(t,function(){var n=a.shift();i=a.length>0,n&&e.apply(null,n),o.g(t.w||h)},function(t){o.d(t)})}var o,i,r={},a=[],s=oa&&oa.createElement("script").async==h;return o=t.Promise,{dynamic:h,normalize:function(t,n){var e=t.indexOf("!");return e>=0?n(t.substr(0,e))+t.substr(e):n(t)},load:function(t,c,u,l){function d(t){(u.error||function(t){throw t})(t)}var p,f,m,b,g;p=t.indexOf("!order")>0,f=t.indexOf("!exports="),m=f>0&&t.substr(f+9),b="prefetch"in l?l.prefetch:h,t=p||f>0?t.substr(0,t.indexOf("!")):t,c=c.toUrl(t),g=c.lastIndexOf(".")<=c.lastIndexOf("/")?c+".js":c,g in r?r[g]instanceof o?r[g].z(u,d):u(r[g]):(t={name:t,url:g,da:p,a:m,fa:l.timeout},r[g]=l=new o,l.z(function(t){r[g]=t,u(t)},d),p&&!s&&i?(a.push([t,l]),b&&(t.L="text/cache",n(t,function(t){t&&t.parentNode.removeChild(t)},function(){}),t.L="")):(i=i||p,e(t,l)))}}});var V=this.document,qa=/^\/\//,ra;V&&(ra=V.head||(V.head=V.getElementsByTagName("head")[0])),this.curlDefine("curl/plugin/link",{load:function(t,n,e,o){t=n.toUrl(t),t=t.lastIndexOf(".")<=t.lastIndexOf("/")?t+".css":t,o=t=(o="fixSchemalessUrls"in o?o.fixSchemalessUrls:V.location.protocol)?t.replace(qa,o+"//"):t,t=V.createElement("link"),t.rel="stylesheet",t.type="text/css",t.href=o,ra.appendChild(t),e(t.sheet||t.styleSheet)}});var ta="createElement",Ba=this.setTimeout,W=this.document,X,Da=W&&W.createStyleSheet&&!(W.documentMode>=10),ya=[],xa=[],va=[],za=12,Ea,wa="HTTP or network error.",$={};W&&(X=W.head||W.getElementsByTagName("head")[0],Ea=Da?ua:Ca),this.curlDefine("curl/plugin/css",{normalize:function(t,n){var e,o;if(!t)return t;e=t.split(","),o=[];for(var i=0,r=e.length;r>i;i++)o.push(n(e[i]));return o.join(",")},load:function(t,n,e,o){function i(t){s.length>1&&a.push(t),0==--u&&e(1==s.length?t:a)}function r(t){(e.d||function(t){throw t})(t)}var a,s,c,u,l;for(a=[],s=(t||"").split(","),c=o.cssWatchPeriod||50,o=o.cssNoWait,u=s.length,l=0;s.length>l;l++){t=s[l];var d;t=n.toUrl(t),t=t.lastIndexOf(".")<=t.lastIndexOf("/")?t+".css":t,o?(d=sa(),d.href=t,X.appendChild(d),i(d.sheet||d.styleSheet)):Ea(t,i,r,c)}},"plugin-builder":"./builder/css",pluginBuilder:"./builder/css"})}.call(scope),scope},setDomReady:function(){(function(){function t(){if(!u&&(u=!0,l)){for(var t=0;l.length>t;t++)l[t].call(window,[]);l=[]}}function n(t){var n=window.onload;window.onload="function"!=typeof window.onload?t:function(){n&&n(),t()}}function e(){if(!c){if(c=!0,document.addEventListener&&!o&&document.addEventListener("DOMContentLoaded",t,!1),i&&window==top&&function(){if(!u){try{document.documentElement.doScroll("left")}catch(n){return setTimeout(arguments.callee,0),void 0}t()}}(),o&&document.addEventListener("DOMContentLoaded",function(){if(!u){for(var n=0;document.styleSheets.length>n;n++)if(document.styleSheets[n].disabled)return setTimeout(arguments.callee,0),void 0;t()}},!1),r){var e;(function(){if(!u)if("loaded"!=document.readyState&&"complete"!=document.readyState)setTimeout(arguments.callee,0);else{if(void 0===e){for(var n=document.getElementsByTagName("link"),o=0;n.length>o;o++)"stylesheet"==n[o].getAttribute("rel")&&e++;n=document.getElementsByTagName("style"),e+=n.length}document.styleSheets.length!=e?setTimeout(arguments.callee,0):t()}})()}n(t)}}var o,i,r,a=window.DomReady={},s=navigator.userAgent.toLowerCase();s.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/),r=/webkit/.test(s),o=/opera/.test(s),i=/msie/.test(s)&&!/opera/.test(s),/mozilla/.test(s)&&/(compatible|webkit)/.test(s);var c=!1,u=!1,l=[];a.ready=function(t){e(),u?t.call(window,[]):l.push(function(){return t.call(window,[])})},e()})()},bind:function(t,n){return n||(n=window),"function"==typeof t?function(){return t.apply(n,arguments)}:NO}};